import{r as i,o as f,c as g,b as n,w as a,aE as w,a as r,I as y,p as v,e as k,h as x}from"./vendor.b8da4354.js";import{_ as b}from"./index.5678bb1a.js";const T={name:"Login",data(){return{loginForm:{username:"shiwuhao",password:"password"},loginRules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},passwordType:"password",capsTooltip:!1,loading:!1,showDialog:!1,redirect:void 0,otherQuery:{}}},watch:{$route:{handler:function(o){const e=o.query;e&&(this.redirect=e.redirect,this.otherQuery=this.getOtherQuery(e))},immediate:!0}},created(){},mounted(){this.loginForm.username===""?this.$refs.username.focus():this.loginForm.password===""&&this.$refs.password.focus()},unmounted(){},methods:{checkCapslock(o){const{key:e}=o;this.capsTooltip=e&&e.length===1&&e>="A"&&e<="Z"},async handleLogin(){if(!!await this.$refs.loginForm.validate()){this.loading=!0;try{const{access_token:e}=await this.$store.dispatch("user/login",this.loginForm);e&&(await this.$router.push({path:this.redirect||"/",query:this.otherQuery}),this.loading=!1)}catch(e){this.loading=!1}}},showPwd(){this.passwordType==="password"?this.passwordType="":this.passwordType="password",this.$nextTick(()=>{this.$refs.password.focus()})},getOtherQuery(o){return Object.keys(o).reduce((e,d)=>(d!=="redirect"&&(e[d]=o[d]),e),{})}}},p=o=>(v("data-v-4209758f"),o=o(),k(),o),F={class:"login-container"},V=p(()=>r("div",{class:"title-container"},[r("h3",{class:"title"},"Login Form")],-1)),C=p(()=>r("span",{class:"svg-container"},[r("i",{class:"el-icon-user"})],-1)),L=p(()=>r("span",{class:"svg-container"},[r("i",{class:"el-icon-lock"})],-1)),I=p(()=>r("i",{class:"el-icon-view"},null,-1)),Q=[I],q=x("Login ");function B(o,e,d,O,s,l){const u=i("el-input"),c=i("el-form-item"),m=i("el-tooltip"),h=i("el-button"),_=i("el-form");return f(),g("div",F,[n(_,{ref:"loginForm",model:s.loginForm,rules:s.loginRules,class:"login-form",autocomplete:"on","label-position":"left"},{default:a(()=>[V,n(c,{prop:"username"},{default:a(()=>[C,n(u,{ref:"username",modelValue:s.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.loginForm.username=t),placeholder:"Username",name:"username",type:"text",tabindex:"1",autocomplete:"on"},null,8,["modelValue"])]),_:1}),n(m,{modelValue:s.capsTooltip,"onUpdate:modelValue":e[4]||(e[4]=t=>s.capsTooltip=t),content:"Caps lock is On",placement:"right",manual:""},{default:a(()=>[n(c,{prop:"password"},{default:a(()=>[L,n(u,{key:s.passwordType,ref:"password",modelValue:s.loginForm.password,"onUpdate:modelValue":e[1]||(e[1]=t=>s.loginForm.password=t),type:s.passwordType,placeholder:"Password",name:"password",tabindex:"2",autocomplete:"on",onKeyup:[l.checkCapslock,w(l.handleLogin,["enter"])],onBlur:e[2]||(e[2]=t=>s.capsTooltip=!1)},null,8,["modelValue","type","onKeyup"]),r("span",{class:"show-pwd",onClick:e[3]||(e[3]=(...t)=>l.showPwd&&l.showPwd(...t))},Q)]),_:1})]),_:1},8,["modelValue"]),n(h,{loading:s.loading,type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:y(l.handleLogin,["prevent"])},{default:a(()=>[q]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"])])}var j=b(T,[["render",B],["__scopeId","data-v-4209758f"]]);export{j as default};
